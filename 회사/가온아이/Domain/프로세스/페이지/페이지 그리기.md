nav에 결재를 누를경우
라우팅을 따라 MainController(IndexApproval))
resultXml = _aspxService.getAprDocList(userId, GetRequestXML());

1 ./ezApproval/Main/AprDocList?PageType=LOAD (GET 요청)
•	역할:
미결함(진행문서) 목록 화면을 최초로 로드합니다.
•	동작:
•	MainController.AprDocList 액션이 실행됨
•	내부적으로 사용자 정보 생성, 서비스(ezApprovalService.AprDocList)에서 ViewModel 생성
•	결과를 ViewBag에 담아 AprDocList.cshtml 뷰로 전달
•	뷰와 함께 관련 JS가 로드됨

2 ./ezApproval/aspx/getAprDocList (POST 요청, AJAX)
•	역할:
실제 미결함 문서 리스트 데이터를 비동기로 받아옵니다.
•	동작:
•	JS에서 AJAX로 호출
•	aspxController.getAprDocList 액션이 실행됨
•	내부적으로 서비스(ezApprovalAspxService.getAprDocList)에서 DB 조회 후 XML 등으로 결과 반환
•	JS에서 받아서 화면에 리스트를 렌더링

3 ./ezApproval/aspx/getListCount?mode=LEFT (POST 요청, AJAX)
•	역할:
미결함 문서의 전체 건수(카운트)를 받아옵니다.
•	동작:
•	JS에서 AJAX로 호출
•	aspxController.getListCount 액션이 실행됨
•	내부적으로 서비스(ezApprovalAspxService.getListCount)에서 DB 조회 후 결과 반환
•	JS에서 받아서 좌측 카운트 등 UI에 표시


요약
1.MainController: 최초 화면 진입 시 기본 데이터와 뷰 전달
2.ezApprovalService: Controller에서 호출, ViewModel 등 비즈니스 데이터 생성
3.AprDocList.cshtml: Razor 뷰, UI 및 JS 로드
4.AprDocList.js: AJAX로 데이터 요청, 결과 받아서 UI 갱신
5.aspxController: AJAX 요청 처리, Service 호출
6.ezApprovalAspxService: 실제 DB/비즈니스 로직 처리, 결과 반환

클라이언트(JS)에서 서버로 XML 요청
 요청 생성
AprDocList.js의 getDocList() 함수에서 아래와 같이 XML DOM을 생성
```js
var xmlpara = createXmlDom();
var objNode;
createNodeInsert(xmlpara, objNode, "PARAMETER");
createNodeAndInsertText(xmlpara, objNode, "pListTypeName", pListTypeValue);
createNodeAndInsertText(xmlpara, objNode, "SearchQuery", SQLPARADATA);

xmlhttp = createXMLHttpRequest();
xmlhttp.open("POST", getCoreAppPath() + "/ezApproval/aspx/getAprDocList", true);
xmlhttp.onreadystatechange = getDocList_after;
xmlhttp.send(xmlpara);
```


•	XML 파라미터: 여러 검색 조건, 페이징, 사용자 정보 등이 <PARAMETER> 노드로 구성되어 XML로 전송됨
•	요청 방식: POST
•	URL: /ezApproval/aspx/getAprDocList
•	비동기 처리: onreadystatechange로 응답 처리

서버(Controller)에서 XML 데이터 수신 및 처리
aspxController.cs에서 요청 처리
```js
[HttpPost]
public IActionResult getAprDocList()
{
    string userId = GetUserId();
    string pXml = GetRequestXML(); // 클라이언트에서 보낸 XML 파라미터 추출
    string resultXml = _aspxService.getAprDocList(userId, pXml); // Service에서 실제 데이터 조회 및 XML 생성
    Response.ContentType = XmlContentType; // 응답 타입을 XML로 지정
    return Content(resultXml); // XML 문자열 반환
}
```
•	GetRequestXML(): 클라이언트가 보낸 XML을 문자열로 추출
•	Service 호출: getAprDocList(userId, pXml)에서 DB 조회 및 결과 XML 생성
•	응답 타입: application/xml 등으로 지정
•	반환 데이터: XML 문자열


서버(Service)에서 DB 조회 및 XML 결과 생성
ezApprovalAspxService.cs (혹은 ezApprovalService.cs 내부)
```js
public string getAprDocList(string userId, string pXml)
{
    // pXml 파싱하여 검색 조건, 페이징 등 추출
    // DB에서 조건에 맞는 문서 리스트 조회
    // 결과를 XML로 가공
    // 예시: <DOCLIST><TOTALCNT>...</TOTALCNT><LISTVIEWDATA>...</LISTVIEWDATA></DOCLIST>
    return resultXml;
}

•	입력: userId, pXml(검색조건 등)
•	처리: DB에서 문서 리스트, 총 건수 등 조회
•	출력: <DOCLIST> 루트의 XML 문자열

클라이언트(JS)에서 XML 응답 파싱 및 화면 표시
1) 응답 처리
getDocList_after() 함수에서 XML 응답을 파싱
```js
if (xmlhttp.responseText == "") return;
var XmlNode = loadXMLString(xmlhttp.responseText);
var cntNode = SelectSingleNodeNew(XmlNode, "DOCLIST/TOTALCNT");
var listNode = SelectSingleNodeNew(XmlNode, "DOCLIST/LISTVIEWDATA");
var lstCnt = getNodeText(cntNode);
// ... 페이징 처리, 화면에 리스트 렌더링
var xmlDoc = createXmlDom();
xmlDoc.appendChild(listNode);
DocList.DataSource(xmlDoc);
DocList.DataBind("DocList");
```

•	XML 파싱: loadXMLString으로 XML 문자열을 DOM 객체로 변환
•	총 건수: <TOTALCNT> 노드에서 추출
•	리스트 데이터: <LISTVIEWDATA> 노드에서 추출
•	UI 렌더링: 커스텀 ListView 객체에 데이터 바인딩하여 화면에 표시

5. 전체 흐름 요약 (코드 관점)
1.	JS에서 XML로 요청 생성 → 서버로 POST
2.	Controller에서 XML 파라미터 수신 → Service에 전달
3.	Service에서 DB 조회 후 XML 결과 생성 → Controller에 반환
4.	Controller에서 XML 응답 반환 → 클라이언트로 전송
5.	JS에서 XML 응답 파싱 → 화면에 리스트 렌더링

추가 설명
•	모든 데이터 요청/응답은 XML 기반
•	검색 조건, 페이징, 사용자 정보 등 모두 XML로 주고받음
•	응답도 XML로, 리스트/카운트 등 포함
•	비동기 처리
•	JS에서 onreadystatechange로 응답을 받아 UI를 동적으로 갱신
•	확장성
•	추가적인 데이터(결재선, 수신문서 등)도 동일한 방식으로 XML로 요청/응답